<!DOCTYPE html>
<meta charset="utf-8">

<style type="text/css">

  svg {
  	border: 1px solid #f0f;
  }

  .AScalia{
    fill: blue;
  }

</style>

<body>
	<h1>SC Data</h1>
    <div class="g-chart-container"></div>
</body>

<script src="https://d3js.org/d3.v4.min.js"></script>

<script>

var margin = {top: 5, right: 10, bottom: 20, left: 20};

var chartContainer = d3.select(".g-chart-container");

var w = 600 - margin.left - margin.right,
    h = 200 - margin.top - margin.bottom;

// nadav = d3.scaleThreshold()
//   .domain(["Ginsburg", "Sotomayor", "Kagan", "Breyer", "Kennedy", "Roberts", "Scalia", "Alito", "Thomas"])
//   .range([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]); //1 more

nadav2 = d3.scaleBand()
  .domain(["Ginsburg", "Sotomayor", "Kagan", "Breyer", "Kennedy", "Roberts", "Scalia", "Alito", "Thomas"])
  .range([0, 10]); //projecting to pixel land

d3.csv("revised_sc_votes.csv", ready);
function ready(err, data){
	if (err) throw "error loading data";
	//console.log(data);

	var votesByCase = d3.nest() //returns an array of the cases
  		.key(function(d) { return d.caseName; })
  		.entries(data);

  	console.log(votesByCase); //all cases
  	console.log(votesByCase.length);
  	// console.log(votesByCase[0]); //one case
  	// console.log(votesByCase[0].values[0]);  	  		  	  		
  	// console.log(votesByCase[0].values[0].caseName);

  	votesByCase.forEach(function(d){ //looping through cases
  		console.log(d.key + "!"); //case name
  		console.log(d.values + "!!");  //the justice votes within that case
  		d.values.forEach(function(z){ //looping through each justice for the individual cases
  			console.log(z.justiceName + " direction: " + z.direction + " and their vote was " + z.vote); //each justice who voted and how they voted
  			//z.newVar = z.justiceName + "!!!"; //making new data with relevant stuff
  		});
  	});

// color = d3.scaleThreshold()
//   .domain([3, 6, 9, 12, 50])
//   .range(["#eff3ff", "#c6dbef", "#9ecae1", "#6baed6", "#3182bd", "#08519c"]);

//   var COLORS = ['#c51b7d','#e9a3c9','#fde0ef','#f7f7f7','#e6f5d0','#a1d76a','#4d9221'];

// var threshold = d3.scaleThreshold()
//         .domain([-4, -3, -2, 2, 3, 4])
//         .range(COLORS); 

// var colorScale = d3.scaleSequential(d3.interpolateInferno)
//     .domain([-10, 5]);


  var xscale = d3.scaleBand() //created to use later
    .domain([0, 1, 2]).padding(0.1)
    //.domain([0, 1, 2, ,'Glabron','Svansota','Velvet','Trebi','Peatland', 'No. 457', 'No. 475', "No. 462", "Wisconsin No. 38"]).padding(0.1)
    .range([0,w])//to pixel land

	var yscale = d3.scaleLinear() //created to use later
		.domain([0,10])
		.range([h,0])

    // function circleDrawer(z){
  		// console.log("FYI: " + z.justiceName + " direction: " + z.direction + " and their vote was " + z.vote); //each justice who voted and how they voted
    // }

	var agroup = chartContainer.selectAll(".a-group") //grab all items that have this a-group characteristic in the svg
		.data(votesByCase) //here's my data that I am binding to the element
		.enter() //data should enter those elemnts
		.append("div") //append those circles
		.attr("class", "a-group")
		.attr("id", function(d){return d.key;})
		.attr("transform", function(d) { //d is the element at that index
			console.log("yo")
			return "translate(" + xscale(d.x) + "," + yscale(d.y) + ")"; //is this me scaling my dots
		});

		agroup.append("h4")
        .text(function(d) {
        // 	d.values.forEach(function(z){
        // 	circleDrawer(z);
        // });
        	return d.key;
        });

	var svg = agroup.append("svg")
        .attr("width", w + margin.left + margin.right)
        .attr("height", h + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

	var xaxis = d3.axisBottom() //means the ticks will go below rather than above
		.scale(xscale) //needs to know scale to project along svg

	var yaxis = d3.axisLeft()
		.scale(yscale)
		//.tickSize(-w); //creates horiz dashed lines. we want the horizontal line size for the y axis to be the width

    var countryPath = svg.selectAll(".justice--vote")
    .data(function(j) { 
        return j.values; 
    })
    .enter()
    .append("circle")
    .attr("class", function(j){
      console.log("FYI: " + j.justiceName + " direction: " + j.direction + " and their vote was " + j.vote);
      return "justice--vote " + j.justiceName;
    })
    .attr("r", 20) //they need a radius of size 3
    .attr("cx", 40)
    .attr("fill", "red")
    .attr("cy", function(j){
      if(j.justiceName == "AScalia"){
        return 50;
      }
      else
      {
        return 100;
      }
    });
    // .attr("d", function(d) {
    //     return lineGenerator(d.values); //values for each country
    // });

    // var redCircle = svg.append("circle") //append those circles
    // .attr("r", 30) //they need a radius of size 3
    // .attr("cx", 40)
    // .attr("fill", "red")
    // .attr("cy", 40);
}


</script>
